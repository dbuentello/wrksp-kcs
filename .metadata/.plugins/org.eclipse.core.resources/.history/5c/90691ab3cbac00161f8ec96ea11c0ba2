package com.mulesoft.custom.kcs;

import org.codehaus.jackson.JsonNode;
import org.codehaus.jackson.map.ObjectMapper;
import org.mule.api.MuleEventContext;
import org.mule.api.MuleMessage;
import org.mule.api.lifecycle.Callable;
import org.mule.api.transport.PropertyScope;

public class JsonDiff implements Callable {

	@Override
	public Object onCall(MuleEventContext eventContext) throws Exception {
		// TODO Auto-generated method stub
		
	    MuleMessage msg = eventContext.getMessage();
	    String path1 = msg.getProperty("payload", PropertyScope.INVOCATION);
	    String path2 = msg.getProperty("origPayload", PropertyScope.INVOCATION);

	    
		ObjectMapper mapper = new ObjectMapper();
		JsonNode actualObj = mapper.readValue("{\"k1\":\"v1\"}", JsonNode.class);
	    
	    
	    /*
	    String[] splitpath = path.split("/");
	    path = splitpath[0];
	    msg.setProperty("destination", path, PropertyScope.OUTBOUND);

	    MuleMessage newMessage = new DefaultMuleMessage(path, msg, eventContext.getMuleContext());
		*/
	    return actualObj;
	}

	
}
